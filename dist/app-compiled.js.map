{"version":3,"sources":["node_modules\\browser-pack\\_prelude.js","e:/wamp/www/TodoItems/app/app.js","e:/wamp/www/TodoItems/app/task.js","e:/wamp/www/TodoItems/app/test.js","e:/wamp/www/TodoItems/js-lib/modernizr.js","node_modules\\store\\store.js"],"names":[],"mappings":"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gBACA;+FACA;AACA;AACA;AACA;sBACA;WACA;AACA;kBACA;AACA;wBACA,AACA;;AACA;gBACA;sDACA;kBACA;2BACA;oBACA;QACA,AACA;;qBACA;oBACA;uCACA;4CACA;;;AACA;mCACA;+BACA;+DACA;gCACA;sBACA;mBACA;AACA;6BACA;mBACA;AACA;8BACA;mBACA;oBACA;AACA;gCACA;iCACA,AACA;;uCACA;2BACA;AACA;yCACA;;;AACA;;;AACA;;AACA;AACA,AACA;;AACA;AACA;AACA;2CACA;;;AACA;;AACA;AACA,AACA;;uCACA;mBACA;qCACA;;;AACA;2CACA;aACA;AACA;4CACA;kDACA;8CACA;AACA;;;AACA;;;AACA;gCACA;gBACA;wCACA;kBACA;AACA;aACA;AACA;yCACA;+CACA;6BACA;+BACA;AACA;AACA;uDACA;SACA,cACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;SACA;2CACA;uBACA;oFACA;uBACA;kDACA;2CACA;iBACA;AACA;AACA;kCACA;yBACA;AACA;+DACA;yBACA;wDACA;oBACA;AACA;AACA;gCACA;2BACA;oBACA;+CACA;gCACA;cACA;AACA;AACA,AACA;;AACA;AACA;AACA;mFACA;2CACA;qEACA;AACA;4DACA;qBACA;;;AACA;gDACA;mBACA;aACA;AACA;mEACA;qBACA;uDACA;8CACA;AACA;0DACA;qBACA;8BACA;mBACA;AACA;oDACA;2DACA;mBACA;uDACA;6CACA;AACA;mBACA;AACA;uCACA;gBACA;wCACA;kBACA;AACA;aACA;AACA;gEACA;2DACA;uDACA;uEACA;AACA;AACA;AACA,AACA;;QACA;mBACA;wBACA;;;AACA;kBACA;gBACA;sBACA;AACA;2BACA,AACA;;WACA;AACA,AACA;uIACA","file":"app-compiled.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import \"../js-lib/modernizr\";\r\n\r\n(function (){\r\n    if (!Modernizr.localstorage) {\r\n        alert(\"Ваш браузер не поддерживает LocalStorage\");\r\n        return false;\r\n    }\r\n}\r\n)();\r\n\r\n//import store from \"store\";\r\nimport \"../app/test\";\r\nimport \"../app/task\";","import store from \"store\";\r\n\r\nexport class Task {\r\n\r\n    constructor (item){\r\n        if(item){\r\n            this.name = item;\r\n            this.numberLastTask = this.getNumberLastTask();\r\n            this.createTask();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    getNumberLastTask(){\r\n        let count = 0;\r\n        store.forEach((key,value)=>{\r\n            if(key.indexOf(\"task_\") != -1){\r\n                count = parseInt(key.substr(5));\r\n            }\r\n        });\r\n\r\n        return count;\r\n    }\r\n\r\n    createTask(){\r\n        store.set(\"task_\"+(this.numberLastTask+1),{\r\n            \"name\":this.name\r\n        });\r\n    }\r\n\r\n    getTask(id){\r\n        this.name = store.get(\"task_\");\r\n        return this.name;\r\n    }\r\n\r\n    render(){\r\n        let tr = \"\";\r\n        store.forEach((key,value)=>{\r\n            if(key.indexOf(\"task_\") != -1){\r\n                let mainTask = value,\r\n                    count = parseInt(key.substr(5));\r\n                tr += [\r\n                    \"<tr class='mainTask'>\",\r\n                        \"<td data-id=\"+count+\">\"+mainTask.name+\"</td>\",\r\n                        \"<td>\",\r\n                            \"<input type='text' name='subtask' placeholder='название подзадачи'>\",\r\n                            \"<button>добавить подзадачу</button>\",\r\n                        \"</td>\",\r\n                    \"</tr>\"\r\n                ].join(\"\");\r\n            }\r\n        });\r\n        return tr;\r\n    }\r\n\r\n    deleteTask(){\r\n\r\n    }\r\n}\r\nconst tasks = new Task();\r\ndocument.querySelector(\"table\").innerHTML = tasks.render();\r\n\r\ndocument.querySelector(\".addTask\").addEventListener(\"click\",event=>{\r\n    event.preventDefault();\r\n    let item = event.target.previousElementSibling.value,\r\n        task = new Task(item),\r\n        name = task.getTask();\r\n    document.querySelector(\"table\").innerHTML = task.render();\r\n\r\n\r\n});\r\n","import store from \"store\";\r\n\r\n//localStorage.setItem(\"name\",\"Igor\");\r\n//localStorage[\"name2\"] = \"Ira\";\r\n//\r\n//console.log(localStorage.getItem(\"name\"));\r\n//console.log( localStorage[\"name2\"] );\r\n//\r\n//localStorage.removeItem(\"name\");\r\n//delete localStorage[\"name2\"];\r\n//\r\n//localStorage.clear();\r\n\r\n\r\n//store.set(\"name\",\"Igor\");\r\nconsole.log(store.get(\"name\"));","/*! modernizr 3.3.1 (Custom Build) | MIT *\n * https://modernizr.com/download/?-localstorage !*/\n!function(n,e,o){function t(n,e){return typeof n===e}function s(){var n,e,o,s,i,f,l;for(var u in a)if(a.hasOwnProperty(u)){if(n=[],e=a[u],e.name&&(n.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(o=0;o<e.options.aliases.length;o++)n.push(e.options.aliases[o].toLowerCase());for(s=t(e.fn,\"function\")?e.fn():e.fn,i=0;i<n.length;i++)f=n[i],l=f.split(\".\"),1===l.length?Modernizr[l[0]]=s:(!Modernizr[l[0]]||Modernizr[l[0]]instanceof Boolean||(Modernizr[l[0]]=new Boolean(Modernizr[l[0]])),Modernizr[l[0]][l[1]]=s),r.push((s?\"\":\"no-\")+l.join(\"-\"))}}var a=[],i={_version:\"3.3.1\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(n,e){var o=this;setTimeout(function(){e(o[n])},0)},addTest:function(n,e,o){a.push({name:n,fn:e,options:o})},addAsyncTest:function(n){a.push({name:null,fn:n})}},Modernizr=function(){};Modernizr.prototype=i,Modernizr=new Modernizr,Modernizr.addTest(\"localstorage\",function(){var n=\"modernizr\";try{return localStorage.setItem(n,n),localStorage.removeItem(n),!0}catch(e){return!1}});var r=[];s(),delete i.addTest,delete i.addAsyncTest;for(var f=0;f<Modernizr._q.length;f++)Modernizr._q[f]();n.Modernizr=Modernizr}(window,document);","(function (global){\n\"use strict\"\n// Module export pattern from\n// https://github.com/umdjs/umd/blob/master/returnExports.js\n;(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.store = factory();\n  }\n}(this, function () {\n\t\n\t// Store.js\n\tvar store = {},\n\t\twin = (typeof window != 'undefined' ? window : global),\n\t\tdoc = win.document,\n\t\tlocalStorageName = 'localStorage',\n\t\tscriptTag = 'script',\n\t\tstorage\n\n\tstore.disabled = false\n\tstore.version = '1.3.20'\n\tstore.set = function(key, value) {}\n\tstore.get = function(key, defaultVal) {}\n\tstore.has = function(key) { return store.get(key) !== undefined }\n\tstore.remove = function(key) {}\n\tstore.clear = function() {}\n\tstore.transact = function(key, defaultVal, transactionFn) {\n\t\tif (transactionFn == null) {\n\t\t\ttransactionFn = defaultVal\n\t\t\tdefaultVal = null\n\t\t}\n\t\tif (defaultVal == null) {\n\t\t\tdefaultVal = {}\n\t\t}\n\t\tvar val = store.get(key, defaultVal)\n\t\ttransactionFn(val)\n\t\tstore.set(key, val)\n\t}\n\tstore.getAll = function() {}\n\tstore.forEach = function() {}\n\n\tstore.serialize = function(value) {\n\t\treturn JSON.stringify(value)\n\t}\n\tstore.deserialize = function(value) {\n\t\tif (typeof value != 'string') { return undefined }\n\t\ttry { return JSON.parse(value) }\n\t\tcatch(e) { return value || undefined }\n\t}\n\n\t// Functions to encapsulate questionable FireFox 3.6.13 behavior\n\t// when about.config::dom.storage.enabled === false\n\t// See https://github.com/marcuswestin/store.js/issues#issue/13\n\tfunction isLocalStorageNameSupported() {\n\t\ttry { return (localStorageName in win && win[localStorageName]) }\n\t\tcatch(err) { return false }\n\t}\n\n\tif (isLocalStorageNameSupported()) {\n\t\tstorage = win[localStorageName]\n\t\tstore.set = function(key, val) {\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setItem(key, store.serialize(val))\n\t\t\treturn val\n\t\t}\n\t\tstore.get = function(key, defaultVal) {\n\t\t\tvar val = store.deserialize(storage.getItem(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t}\n\t\tstore.remove = function(key) { storage.removeItem(key) }\n\t\tstore.clear = function() { storage.clear() }\n\t\tstore.getAll = function() {\n\t\t\tvar ret = {}\n\t\t\tstore.forEach(function(key, val) {\n\t\t\t\tret[key] = val\n\t\t\t})\n\t\t\treturn ret\n\t\t}\n\t\tstore.forEach = function(callback) {\n\t\t\tfor (var i=0; i<storage.length; i++) {\n\t\t\t\tvar key = storage.key(i)\n\t\t\t\tcallback(key, store.get(key))\n\t\t\t}\n\t\t}\n\t} else if (doc && doc.documentElement.addBehavior) {\n\t\tvar storageOwner,\n\t\t\tstorageContainer\n\t\t// Since #userData storage applies only to specific paths, we need to\n\t\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t\t// as a pretty safe option, since all browsers already make a request to\n\t\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t\t// since the iframe access rules appear to allow direct access and\n\t\t// manipulation of the document element, even for a 404 page.  This\n\t\t// document can be used instead of the current document (which would\n\t\t// have been limited to the current path) to perform #userData storage.\n\t\ttry {\n\t\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\t\tstorageContainer.open()\n\t\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\t\tstorageContainer.close()\n\t\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\t\tstorage = storageOwner.createElement('div')\n\t\t} catch(e) {\n\t\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t\t// security settings or otherwse), fall back to per-path storage\n\t\t\tstorage = doc.createElement('div')\n\t\t\tstorageOwner = doc.body\n\t\t}\n\t\tvar withIEStorage = function(storeFunction) {\n\t\t\treturn function() {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments, 0)\n\t\t\t\targs.unshift(storage)\n\t\t\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\t\t\tstorageOwner.appendChild(storage)\n\t\t\t\tstorage.addBehavior('#default#userData')\n\t\t\t\tstorage.load(localStorageName)\n\t\t\t\tvar result = storeFunction.apply(store, args)\n\t\t\t\tstorageOwner.removeChild(storage)\n\t\t\t\treturn result\n\t\t\t}\n\t\t}\n\n\t\t// In IE7, keys cannot start with a digit or contain certain chars.\n\t\t// See https://github.com/marcuswestin/store.js/issues/40\n\t\t// See https://github.com/marcuswestin/store.js/issues/83\n\t\tvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\n\t\tvar ieKeyFix = function(key) {\n\t\t\treturn key.replace(/^d/, '___$&').replace(forbiddenCharsRegex, '___')\n\t\t}\n\t\tstore.set = withIEStorage(function(storage, key, val) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setAttribute(key, store.serialize(val))\n\t\t\tstorage.save(localStorageName)\n\t\t\treturn val\n\t\t})\n\t\tstore.get = withIEStorage(function(storage, key, defaultVal) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tvar val = store.deserialize(storage.getAttribute(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t})\n\t\tstore.remove = withIEStorage(function(storage, key) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tstorage.removeAttribute(key)\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.clear = withIEStorage(function(storage) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tstorage.load(localStorageName)\n\t\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\t\tstorage.removeAttribute(attributes[i].name)\n\t\t\t}\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.getAll = function(storage) {\n\t\t\tvar ret = {}\n\t\t\tstore.forEach(function(key, val) {\n\t\t\t\tret[key] = val\n\t\t\t})\n\t\t\treturn ret\n\t\t}\n\t\tstore.forEach = withIEStorage(function(storage, callback) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tfor (var i=0, attr; attr=attributes[i]; ++i) {\n\t\t\t\tcallback(attr.name, store.deserialize(storage.getAttribute(attr.name)))\n\t\t\t}\n\t\t})\n\t}\n\n\ttry {\n\t\tvar testKey = '__storejs__'\n\t\tstore.set(testKey, testKey)\n\t\tif (store.get(testKey) != testKey) { store.disabled = true }\n\t\tstore.remove(testKey)\n\t} catch(e) {\n\t\tstore.disabled = true\n\t}\n\tstore.enabled = !store.disabled\n\t\n\treturn store\n}));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zdG9yZS9zdG9yZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIlxuLy8gTW9kdWxlIGV4cG9ydCBwYXR0ZXJuIGZyb21cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuOyhmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgICAgICByb290LnN0b3JlID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcblx0XG5cdC8vIFN0b3JlLmpzXG5cdHZhciBzdG9yZSA9IHt9LFxuXHRcdHdpbiA9ICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKSxcblx0XHRkb2MgPSB3aW4uZG9jdW1lbnQsXG5cdFx0bG9jYWxTdG9yYWdlTmFtZSA9ICdsb2NhbFN0b3JhZ2UnLFxuXHRcdHNjcmlwdFRhZyA9ICdzY3JpcHQnLFxuXHRcdHN0b3JhZ2VcblxuXHRzdG9yZS5kaXNhYmxlZCA9IGZhbHNlXG5cdHN0b3JlLnZlcnNpb24gPSAnMS4zLjIwJ1xuXHRzdG9yZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7fVxuXHRzdG9yZS5nZXQgPSBmdW5jdGlvbihrZXksIGRlZmF1bHRWYWwpIHt9XG5cdHN0b3JlLmhhcyA9IGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gc3RvcmUuZ2V0KGtleSkgIT09IHVuZGVmaW5lZCB9XG5cdHN0b3JlLnJlbW92ZSA9IGZ1bmN0aW9uKGtleSkge31cblx0c3RvcmUuY2xlYXIgPSBmdW5jdGlvbigpIHt9XG5cdHN0b3JlLnRyYW5zYWN0ID0gZnVuY3Rpb24oa2V5LCBkZWZhdWx0VmFsLCB0cmFuc2FjdGlvbkZuKSB7XG5cdFx0aWYgKHRyYW5zYWN0aW9uRm4gPT0gbnVsbCkge1xuXHRcdFx0dHJhbnNhY3Rpb25GbiA9IGRlZmF1bHRWYWxcblx0XHRcdGRlZmF1bHRWYWwgPSBudWxsXG5cdFx0fVxuXHRcdGlmIChkZWZhdWx0VmFsID09IG51bGwpIHtcblx0XHRcdGRlZmF1bHRWYWwgPSB7fVxuXHRcdH1cblx0XHR2YXIgdmFsID0gc3RvcmUuZ2V0KGtleSwgZGVmYXVsdFZhbClcblx0XHR0cmFuc2FjdGlvbkZuKHZhbClcblx0XHRzdG9yZS5zZXQoa2V5LCB2YWwpXG5cdH1cblx0c3RvcmUuZ2V0QWxsID0gZnVuY3Rpb24oKSB7fVxuXHRzdG9yZS5mb3JFYWNoID0gZnVuY3Rpb24oKSB7fVxuXG5cdHN0b3JlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKVxuXHR9XG5cdHN0b3JlLmRlc2VyaWFsaXplID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7IHJldHVybiB1bmRlZmluZWQgfVxuXHRcdHRyeSB7IHJldHVybiBKU09OLnBhcnNlKHZhbHVlKSB9XG5cdFx0Y2F0Y2goZSkgeyByZXR1cm4gdmFsdWUgfHwgdW5kZWZpbmVkIH1cblx0fVxuXG5cdC8vIEZ1bmN0aW9ucyB0byBlbmNhcHN1bGF0ZSBxdWVzdGlvbmFibGUgRmlyZUZveCAzLjYuMTMgYmVoYXZpb3Jcblx0Ly8gd2hlbiBhYm91dC5jb25maWc6OmRvbS5zdG9yYWdlLmVuYWJsZWQgPT09IGZhbHNlXG5cdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWFyY3Vzd2VzdGluL3N0b3JlLmpzL2lzc3VlcyNpc3N1ZS8xM1xuXHRmdW5jdGlvbiBpc0xvY2FsU3RvcmFnZU5hbWVTdXBwb3J0ZWQoKSB7XG5cdFx0dHJ5IHsgcmV0dXJuIChsb2NhbFN0b3JhZ2VOYW1lIGluIHdpbiAmJiB3aW5bbG9jYWxTdG9yYWdlTmFtZV0pIH1cblx0XHRjYXRjaChlcnIpIHsgcmV0dXJuIGZhbHNlIH1cblx0fVxuXG5cdGlmIChpc0xvY2FsU3RvcmFnZU5hbWVTdXBwb3J0ZWQoKSkge1xuXHRcdHN0b3JhZ2UgPSB3aW5bbG9jYWxTdG9yYWdlTmFtZV1cblx0XHRzdG9yZS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuXHRcdFx0aWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBzdG9yZS5yZW1vdmUoa2V5KSB9XG5cdFx0XHRzdG9yYWdlLnNldEl0ZW0oa2V5LCBzdG9yZS5zZXJpYWxpemUodmFsKSlcblx0XHRcdHJldHVybiB2YWxcblx0XHR9XG5cdFx0c3RvcmUuZ2V0ID0gZnVuY3Rpb24oa2V5LCBkZWZhdWx0VmFsKSB7XG5cdFx0XHR2YXIgdmFsID0gc3RvcmUuZGVzZXJpYWxpemUoc3RvcmFnZS5nZXRJdGVtKGtleSkpXG5cdFx0XHRyZXR1cm4gKHZhbCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbCA6IHZhbClcblx0XHR9XG5cdFx0c3RvcmUucmVtb3ZlID0gZnVuY3Rpb24oa2V5KSB7IHN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpIH1cblx0XHRzdG9yZS5jbGVhciA9IGZ1bmN0aW9uKCkgeyBzdG9yYWdlLmNsZWFyKCkgfVxuXHRcdHN0b3JlLmdldEFsbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJldCA9IHt9XG5cdFx0XHRzdG9yZS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsKSB7XG5cdFx0XHRcdHJldFtrZXldID0gdmFsXG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuIHJldFxuXHRcdH1cblx0XHRzdG9yZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0XHRcdGZvciAodmFyIGk9MDsgaTxzdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBrZXkgPSBzdG9yYWdlLmtleShpKVxuXHRcdFx0XHRjYWxsYmFjayhrZXksIHN0b3JlLmdldChrZXkpKVxuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmIChkb2MgJiYgZG9jLmRvY3VtZW50RWxlbWVudC5hZGRCZWhhdmlvcikge1xuXHRcdHZhciBzdG9yYWdlT3duZXIsXG5cdFx0XHRzdG9yYWdlQ29udGFpbmVyXG5cdFx0Ly8gU2luY2UgI3VzZXJEYXRhIHN0b3JhZ2UgYXBwbGllcyBvbmx5IHRvIHNwZWNpZmljIHBhdGhzLCB3ZSBuZWVkIHRvXG5cdFx0Ly8gc29tZWhvdyBsaW5rIG91ciBkYXRhIHRvIGEgc3BlY2lmaWMgcGF0aC4gIFdlIGNob29zZSAvZmF2aWNvbi5pY29cblx0XHQvLyBhcyBhIHByZXR0eSBzYWZlIG9wdGlvbiwgc2luY2UgYWxsIGJyb3dzZXJzIGFscmVhZHkgbWFrZSBhIHJlcXVlc3QgdG9cblx0XHQvLyB0aGlzIFVSTCBhbnl3YXkgYW5kIGJlaW5nIGEgNDA0IHdpbGwgbm90IGh1cnQgdXMgaGVyZS4gIFdlIHdyYXAgYW5cblx0XHQvLyBpZnJhbWUgcG9pbnRpbmcgdG8gdGhlIGZhdmljb24gaW4gYW4gQWN0aXZlWE9iamVjdChodG1sZmlsZSkgb2JqZWN0XG5cdFx0Ly8gKHNlZTogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2FhNzUyNTc0KHY9VlMuODUpLmFzcHgpXG5cdFx0Ly8gc2luY2UgdGhlIGlmcmFtZSBhY2Nlc3MgcnVsZXMgYXBwZWFyIHRvIGFsbG93IGRpcmVjdCBhY2Nlc3MgYW5kXG5cdFx0Ly8gbWFuaXB1bGF0aW9uIG9mIHRoZSBkb2N1bWVudCBlbGVtZW50LCBldmVuIGZvciBhIDQwNCBwYWdlLiAgVGhpc1xuXHRcdC8vIGRvY3VtZW50IGNhbiBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgZG9jdW1lbnQgKHdoaWNoIHdvdWxkXG5cdFx0Ly8gaGF2ZSBiZWVuIGxpbWl0ZWQgdG8gdGhlIGN1cnJlbnQgcGF0aCkgdG8gcGVyZm9ybSAjdXNlckRhdGEgc3RvcmFnZS5cblx0XHR0cnkge1xuXHRcdFx0c3RvcmFnZUNvbnRhaW5lciA9IG5ldyBBY3RpdmVYT2JqZWN0KCdodG1sZmlsZScpXG5cdFx0XHRzdG9yYWdlQ29udGFpbmVyLm9wZW4oKVxuXHRcdFx0c3RvcmFnZUNvbnRhaW5lci53cml0ZSgnPCcrc2NyaXB0VGFnKyc+ZG9jdW1lbnQudz13aW5kb3c8Lycrc2NyaXB0VGFnKyc+PGlmcmFtZSBzcmM9XCIvZmF2aWNvbi5pY29cIj48L2lmcmFtZT4nKVxuXHRcdFx0c3RvcmFnZUNvbnRhaW5lci5jbG9zZSgpXG5cdFx0XHRzdG9yYWdlT3duZXIgPSBzdG9yYWdlQ29udGFpbmVyLncuZnJhbWVzWzBdLmRvY3VtZW50XG5cdFx0XHRzdG9yYWdlID0gc3RvcmFnZU93bmVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdFx0fSBjYXRjaChlKSB7XG5cdFx0XHQvLyBzb21laG93IEFjdGl2ZVhPYmplY3QgaW5zdGFudGlhdGlvbiBmYWlsZWQgKHBlcmhhcHMgc29tZSBzcGVjaWFsXG5cdFx0XHQvLyBzZWN1cml0eSBzZXR0aW5ncyBvciBvdGhlcndzZSksIGZhbGwgYmFjayB0byBwZXItcGF0aCBzdG9yYWdlXG5cdFx0XHRzdG9yYWdlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdFx0XHRzdG9yYWdlT3duZXIgPSBkb2MuYm9keVxuXHRcdH1cblx0XHR2YXIgd2l0aElFU3RvcmFnZSA9IGZ1bmN0aW9uKHN0b3JlRnVuY3Rpb24pIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApXG5cdFx0XHRcdGFyZ3MudW5zaGlmdChzdG9yYWdlKVxuXHRcdFx0XHQvLyBTZWUgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTMxMDgxKHY9VlMuODUpLmFzcHhcblx0XHRcdFx0Ly8gYW5kIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzMTQyNCh2PVZTLjg1KS5hc3B4XG5cdFx0XHRcdHN0b3JhZ2VPd25lci5hcHBlbmRDaGlsZChzdG9yYWdlKVxuXHRcdFx0XHRzdG9yYWdlLmFkZEJlaGF2aW9yKCcjZGVmYXVsdCN1c2VyRGF0YScpXG5cdFx0XHRcdHN0b3JhZ2UubG9hZChsb2NhbFN0b3JhZ2VOYW1lKVxuXHRcdFx0XHR2YXIgcmVzdWx0ID0gc3RvcmVGdW5jdGlvbi5hcHBseShzdG9yZSwgYXJncylcblx0XHRcdFx0c3RvcmFnZU93bmVyLnJlbW92ZUNoaWxkKHN0b3JhZ2UpXG5cdFx0XHRcdHJldHVybiByZXN1bHRcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJbiBJRTcsIGtleXMgY2Fubm90IHN0YXJ0IHdpdGggYSBkaWdpdCBvciBjb250YWluIGNlcnRhaW4gY2hhcnMuXG5cdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJjdXN3ZXN0aW4vc3RvcmUuanMvaXNzdWVzLzQwXG5cdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJjdXN3ZXN0aW4vc3RvcmUuanMvaXNzdWVzLzgzXG5cdFx0dmFyIGZvcmJpZGRlbkNoYXJzUmVnZXggPSBuZXcgUmVnRXhwKFwiWyFcXFwiIyQlJicoKSorLC9cXFxcXFxcXDo7PD0+P0BbXFxcXF1eYHt8fX5dXCIsIFwiZ1wiKVxuXHRcdHZhciBpZUtleUZpeCA9IGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0cmV0dXJuIGtleS5yZXBsYWNlKC9eZC8sICdfX18kJicpLnJlcGxhY2UoZm9yYmlkZGVuQ2hhcnNSZWdleCwgJ19fXycpXG5cdFx0fVxuXHRcdHN0b3JlLnNldCA9IHdpdGhJRVN0b3JhZ2UoZnVuY3Rpb24oc3RvcmFnZSwga2V5LCB2YWwpIHtcblx0XHRcdGtleSA9IGllS2V5Rml4KGtleSlcblx0XHRcdGlmICh2YWwgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gc3RvcmUucmVtb3ZlKGtleSkgfVxuXHRcdFx0c3RvcmFnZS5zZXRBdHRyaWJ1dGUoa2V5LCBzdG9yZS5zZXJpYWxpemUodmFsKSlcblx0XHRcdHN0b3JhZ2Uuc2F2ZShsb2NhbFN0b3JhZ2VOYW1lKVxuXHRcdFx0cmV0dXJuIHZhbFxuXHRcdH0pXG5cdFx0c3RvcmUuZ2V0ID0gd2l0aElFU3RvcmFnZShmdW5jdGlvbihzdG9yYWdlLCBrZXksIGRlZmF1bHRWYWwpIHtcblx0XHRcdGtleSA9IGllS2V5Rml4KGtleSlcblx0XHRcdHZhciB2YWwgPSBzdG9yZS5kZXNlcmlhbGl6ZShzdG9yYWdlLmdldEF0dHJpYnV0ZShrZXkpKVxuXHRcdFx0cmV0dXJuICh2YWwgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWwgOiB2YWwpXG5cdFx0fSlcblx0XHRzdG9yZS5yZW1vdmUgPSB3aXRoSUVTdG9yYWdlKGZ1bmN0aW9uKHN0b3JhZ2UsIGtleSkge1xuXHRcdFx0a2V5ID0gaWVLZXlGaXgoa2V5KVxuXHRcdFx0c3RvcmFnZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KVxuXHRcdFx0c3RvcmFnZS5zYXZlKGxvY2FsU3RvcmFnZU5hbWUpXG5cdFx0fSlcblx0XHRzdG9yZS5jbGVhciA9IHdpdGhJRVN0b3JhZ2UoZnVuY3Rpb24oc3RvcmFnZSkge1xuXHRcdFx0dmFyIGF0dHJpYnV0ZXMgPSBzdG9yYWdlLlhNTERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hdHRyaWJ1dGVzXG5cdFx0XHRzdG9yYWdlLmxvYWQobG9jYWxTdG9yYWdlTmFtZSlcblx0XHRcdGZvciAodmFyIGk9YXR0cmlidXRlcy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG5cdFx0XHRcdHN0b3JhZ2UucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXNbaV0ubmFtZSlcblx0XHRcdH1cblx0XHRcdHN0b3JhZ2Uuc2F2ZShsb2NhbFN0b3JhZ2VOYW1lKVxuXHRcdH0pXG5cdFx0c3RvcmUuZ2V0QWxsID0gZnVuY3Rpb24oc3RvcmFnZSkge1xuXHRcdFx0dmFyIHJldCA9IHt9XG5cdFx0XHRzdG9yZS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsKSB7XG5cdFx0XHRcdHJldFtrZXldID0gdmFsXG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuIHJldFxuXHRcdH1cblx0XHRzdG9yZS5mb3JFYWNoID0gd2l0aElFU3RvcmFnZShmdW5jdGlvbihzdG9yYWdlLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGF0dHJpYnV0ZXMgPSBzdG9yYWdlLlhNTERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hdHRyaWJ1dGVzXG5cdFx0XHRmb3IgKHZhciBpPTAsIGF0dHI7IGF0dHI9YXR0cmlidXRlc1tpXTsgKytpKSB7XG5cdFx0XHRcdGNhbGxiYWNrKGF0dHIubmFtZSwgc3RvcmUuZGVzZXJpYWxpemUoc3RvcmFnZS5nZXRBdHRyaWJ1dGUoYXR0ci5uYW1lKSkpXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdHRyeSB7XG5cdFx0dmFyIHRlc3RLZXkgPSAnX19zdG9yZWpzX18nXG5cdFx0c3RvcmUuc2V0KHRlc3RLZXksIHRlc3RLZXkpXG5cdFx0aWYgKHN0b3JlLmdldCh0ZXN0S2V5KSAhPSB0ZXN0S2V5KSB7IHN0b3JlLmRpc2FibGVkID0gdHJ1ZSB9XG5cdFx0c3RvcmUucmVtb3ZlKHRlc3RLZXkpXG5cdH0gY2F0Y2goZSkge1xuXHRcdHN0b3JlLmRpc2FibGVkID0gdHJ1ZVxuXHR9XG5cdHN0b3JlLmVuYWJsZWQgPSAhc3RvcmUuZGlzYWJsZWRcblx0XG5cdHJldHVybiBzdG9yZVxufSkpO1xuIl19"]}